# Terrain — Session Tracking

## Current Task

017 — Threshold Surfacing (Phase 3)

## Quick Status

| Item | Status |
|------|--------|
| Product spec | Done |
| Tech spec | Done |
| Design system | Done |
| Tasks | Done (22 tasks: 001-022) |
| Build | In progress |

## Task Progress

| # | Task | Status |
|---|------|--------|
| 001 | Next.js Project Setup | Done |
| 002 | Networking Domain Package | Done |
| 003 | App Shell & Layout | Done |
| 004 | Conversation UI | Done |
| 005 | Conversation Loop (Backend) | Done |
| 006 | Grill Mode | Done |
| 007 | Territory List View (MVP Map) | Done |
| 008 | Margin Panel | Done |
| 009 | Event Visibility & Challengeability | Done |
| 010 | Session Management | Done |
| 011 | Explain Mode (Phase 2) | Done |
| 012 | Sandbox Mode (Phase 2) | Done |
| 013 | Visual Map (Phase 2) | Done |
| 014 | Self-Calibration View (Phase 2) | Done |
| 015 | Mode Transitions (Phase 2) | Done |
| 016 | Layout Redesign (Phase 3) | Done |
| 017 | Threshold Surfacing (Phase 3) | Pending |
| 018 | Write Mode (Phase 3) | Pending |
| 019 | Sketch Mode (Phase 3) | Pending |
| 020 | Sekiro Prompts (Phase 3) | Pending |
| 021 | Goals & Path Suggestions (Phase 3) | Pending |
| 022 | Provision Mode (Phase 3) | Pending |

## Phases

- **Phase 1 (001-010):** Conversation + Grill + Claims + MVP Map
- **Phase 2 (011-015):** Explain + Sandbox + Visual Map + Self-Calibration + Mode Transitions
- **Phase 3 (016-022):** Layout Redesign + Thresholds + Write + Sketch + Sekiro + Goals + Provision

## Last Session

016 completed. Layout redesign: killed three-column layout + bottom bar, built two-state architecture (conversation full-width centered 640px / map full-viewport), Drawer component (slide from right, Escape/click-outside/X dismiss, mobile slides from bottom), TopBar (terrain title, ⊘ calibration glyph, session timer, map toggle), MapView (full-viewport VisualMap + territory overlay). Keyboard shortcuts: Cmd/Ctrl+M (map), Cmd/Ctrl+. (context drawer), Escape (close). Renumbered tasks 016-021 → 017-022. 348 terrain tests, 79 engine tests, zero regressions.

## Blockers

None.

## Next Steps

Start 017 — Threshold Surfacing (Phase 3).
